<h1>Listings</h1>

<div data-controller="insert-in-list">
  <div data-insert-in-list-target="items" class="row">
    <% @listings.each do |listing| %>
      <div class="col-sm-3 mb-4">
        <%= link_to listing_path(listing), class: "text-decoration-none" do %>
          <%= render "listings/listing", listing: listing %>
        <% end %>
      </div>
    <% end %>
  </div>
</div>




  <div data-controller="toggle" class="mt-5">
    <button data-action="click->toggle#fire" class="btn btn-outline-primary">
      Create New Listing
    </button>

    <div data-toggle-target="togglableElement" class="d-none" >
      <%= render "form", listing: @listing %>
    </div>
  </div>
</div>

<div class="mt-5" style="width: 100%; height: 600px;"
  data-controller="map"
  data-map-markers-value="<%= @markers.to_json %>"
  data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>">
</div>
